<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"      
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions">

  <p:dialog header="Selected List Members" 
            position="left"            
            showEffect="fade" 
            hideEffect="fade"                
            widgetVar="selectedListMembersDlg"
            minimizable="false"
            maximizable="false"
            resizable="true"
            draggable="true"
            height="400"
            width="400"
            appendTo="@(body)">  

    <p:outputPanel id="SelectedListMembersDialog">

      <p:commandButton onclick="imageGridFromAllSelectedStructures();" value="All structures as image grid" /> 

      <h:outputText value="Selected List Members with #{fn:length(listManagerController.selectedActiveListMembers)} selected"/>

      <p:dataGrid value="#{listManagerController.selectedActiveListMembers}"
                  var="clm" 
                  columns="7">

        <p:panelGrid columns="1">

          <f:facet name="header"> 
            <h:outputText value="#{clm.cmpd.name}"/>
          </f:facet> 

          <h:graphicImage rendered="#{!empty clm.cmpd.parentFragment.cmpdFragmentStructure.canSmi}"
                          alt="png-structure-image"
                          width="200" height="200"
                          id="selectedstrcImg"
                          styleClass="unassignedClass"
                          url='/StructureServlet?color-atoms=true&amp;structureDim=200&amp;title=#{clm.cmpd.name}&amp;smiles=#{applicationScopeBean.urlEncode(clm.cmpd.parentFragment.cmpdFragmentStructure.canSmi)}&amp;querySmiles=#{applicationScopeBean.urlEncode(listManagerController.activeList.anchorSmiles)}'>
          </h:graphicImage> 

        </p:panelGrid>

      </p:dataGrid>

    </p:outputPanel>

  </p:dialog>

</ui:composition>