<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"      
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions">

    <h2 style="margin: 0;">
        <h:outputText value="Act on Selected Rows"/>
    </h2>

    <p:menubar>
        <p:menuitem action="#{launchingController.performConnectToLandingJson()}"
                    value="NCI60 DATA TEST JSON"
                    onstart="PF('resolvingBUI').show();"
                    oncomplete="PF('resolvingBUI').hide();"/>
        <p:menuitem action="#{listContentController.performConnectToLandingSpotfire()}"
                    value="NCI60 DATA"
                    onstart="PF('resolvingBUI').show();"
                    oncomplete="PF('resolvingBUI').hide();"/>
        <p:menuitem actionListener="#{listContentController.performConfigureCreate()}"
                    value="CREATE New List"
                    onclick="PF('crt_dlg').show();"/>
        <p:menuitem actionListener="#{listContentController.performConfigureAppend()}"
                    value="Append to List"
                    onclick="PF('app_dlg').show();"/>
        <p:menuitem actionListener="#{listContentController.performConfigureDelete()}"
                    value="DELETE from List"
                    onclick="PF('del_dlg').show();"/>
    </p:menubar>

    <p:dialog header="Delete Selected From List" 
              widgetVar="del_dlg" 
              modal="true"
              width="600" height="400">
        <p:outputPanel autoUpdate="true">
            <h:outputText value="Delete From #{listManagerController.listManagerBean.activeList.listName}." />
            <p:spacer height="20" width="100%"/>
            <h:outputText value="Delete #{fn:length(listManagerController.listManagerBean.selectedActiveListMembers)} List Members." />
            <p:spacer height="20" width="100%"/>
            <p:outputLabel value="Delete cannot be undone." style="font-size: 200%; color: red;"/>
            <p:spacer height="20" width="100%"/>
            <p:commandButton action="#{listContentController.performDeleteFromActiveList()}"
                             value="Delete Selected From List"
                             onstart="PF('appendingBUI').show();"
                             oncomplete="PF('appendingBUI').hide();"
                             style="width: 100%;" />
        </p:outputPanel>
    </p:dialog>

    <p:dialog header="Create New List From Selected" 
              widgetVar="crt_dlg" 
              modal="true"
              width="600" height="400">
        <p:outputPanel autoUpdate="true">            
            <h:outputText value="Create New List from #{fn:length(listManagerController.listManagerBean.selectedActiveListMembers)} List Members." />
            <p:spacer height="20" width="100%"/>
            <p:outputLabel for="listNameText" value="New List name:" />            
            <p:inputText id="listNameText" value="#{listContentController.listName}" />
            <p:spacer height="20" width="100%"/>
            <p:commandButton action="#{listContentController.performCreateNewListFromSelectedListMembers()}"
                             value="Create New List from Selected"
                             onstart="PF('appendingBUI').show();"
                             oncomplete="PF('appendingBUI').hide();"
                             style="width: 100%;" />            
        </p:outputPanel>
    </p:dialog>

    <p:dialog header="Append Selected to Existing List" 
              widgetVar="app_dlg" 
              modal="true"
              width="600" height="400">
        <p:outputPanel autoUpdate="true">            
            <h:outputText value="Append #{fn:length(listManagerController.listManagerBean.selectedActiveListMembers)} List Members to Existing List." />
            <p:spacer height="20" width="100%"/>
            <p:outputLabel for="listSelect" value="Select an Existing List:"/>
            <p:spacer height="20" width="100%"/>
            <p:selectOneRadio id="listSelect" 
                              value="#{listContentController.targetList}" 
                              converter="#{cmpdListConverter}"
                              layout="pageDirection">
                <f:selectItems value="#{listManagerController.listManagerBean.availableLists}" 
                               var="list" 
                               itemLabel="#{list.listName}" 
                               itemValue="#{list}" /> 
            </p:selectOneRadio>
            <p:spacer height="20" width="100%"/>
            <p:commandButton action="#{listContentController.performAppendSelectedToExistingList()}"
                             value="Append Selected to Existing List"
                             onstart="PF('appendingBUI').show();"
                             oncomplete="PF('appendingBUI').hide();"
                             style="width: 100%;" />            
        </p:outputPanel>    
    </p:dialog>

</ui:composition>