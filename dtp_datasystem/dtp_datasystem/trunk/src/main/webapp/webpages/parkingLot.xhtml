<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"      
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"                
                template="/webpages/templates/ui.xhtml">

  <ui:define name="content">

    <h:head>

      <h:outputScript library="chemdoodle" name="ChemDoodleWeb.max.js"/>
      <h:outputStylesheet library="chemdoodle" name="ChemDoodleWeb.css"/>

      <h:outputScript library="chemdoodle" name="uis/ChemDoodleWeb-uis.max.js"/>
      <h:outputStylesheet library="chemdoodle" name="uis/jquery-ui-1.10.3.custom.css"/>

    </h:head>

    <p:remoteCommand name="runLoadByNsc" 
                     action="#{structureSearchController.performLoadEditorByNsc()}" 
                     onstart="PF('loadingBUI').show();"
                     oncomplete="PF('loadingBUI').hide();"
                     update=":datasystemForm:molforload"/>

    <p:panelGrid columns="2">

      <p:commandButton value="Load Structure for NSC"
                       onclick="runLoadByNsc()"
                       oncomplete="loadEditorFromMol();"/>

      <p:column>
        <h:outputLabel for="nscforjcp" value="NSC:"/>    
        <p:inputText value="#{structureSearchController.nscForJChemPaintLoad}" id="nscforjcp" maxlength="10"/>
      </p:column>

    </p:panelGrid>

    <p:panelGrid columns="2">
      <h:outputLabel for="molforload" value="Mol For Load"/>    
      <h:inputTextarea id="molforload" cols="100" rows="10" value="#{structureSearchController.ctabNoCarRtn}"/>
      <h:outputLabel for="ctab" value="ctab:"/>    
      <h:inputTextarea id="ctab" value="#{structureSearchController.ctab}"  cols="100" rows="10"/>  
    </p:panelGrid>

    <script type="text/javascript">
      ChemDoodle.default_bondLength_2D = 14.4;
      ChemDoodle.default_bonds_width_2D = .6;
      ChemDoodle.default_bonds_saturationWidth_2D = .18;
      ChemDoodle.default_bonds_hashSpacing_2D = 2.5;
      ChemDoodle.default_atoms_font_size_2D = 10;
      ChemDoodle.default_atoms_font_families_2D = ['Helvetica', 'Arial', 'sans-serif'];
      ChemDoodle.default_atoms_displayTerminalCarbonLabels_2D = true;
      ChemDoodle.default_atoms_useJMOLColors = true;
    </script>

    <br/>

    <p:commandButton onclick="getMolFromEditor();"
                     value="getMolFromEditor()"/>

    <br/>

    <p:commandButton onclick="loadEditorFromMol();"
                     value="loadEditorFromMol()"/>

    <br/>

    <script type="text/javascript">
      ChemDoodle.ELEMENT['H'].jmolColor = 'black';
      ChemDoodle.ELEMENT['S'].jmolColor = '#B9A130';
      var sketcher = new ChemDoodle.SketcherCanvas('sketcher', 500, 300, {useServices: false, oneMolecule: true});
      sketcher.specs.atoms_displayTerminalCarbonLabels_2D = true;
      sketcher.specs.atoms_useJMOLColors = true;
      sketcher.specs.bonds_clearOverlaps_2D = true;

      var tmp = document.getElementById('datasystemForm:molforload').value;
      
      var ctab = String(tmp);
      
      alert(ctab);

        var mol = ChemDoodle.readMOL(ctab);
        alert(mol);
        
        if (mol) {
          sketcher.loadMolecule(mol);
        } else {
          sketcher.repaint();
          alert('NSC not found or no parent fragment defined.');
        }
        


    </script>      

  </ui:define>

  <ui:remove>

    <script type="text/javascript">
      var message = 'The version of ChemDoodle installed is: ' + ChemDoodle.getVersion();
      alert(message);
    </script>

    <script type="text/javascript">
      function alertMolecule(mol) {
        var message = 'This molecule contains ' + mol.atoms.length + ' atoms and ' + mol.bonds.length + ' bonds.';
        alert(message);
      }
      alertMolecule(new ChemDoodle.structures.Molecule());
    </script>

    <script type="text/javascript">
      var mol = new ChemDoodle.structures.Molecule();
      var carbon = new ChemDoodle.structures.Atom('C');
      var oxygen = new ChemDoodle.structures.Atom('O');
      var bond = new ChemDoodle.structures.Bond(carbon, oxygen, 1);
      mol.atoms[0] = carbon;
      mol.atoms[1] = oxygen;
      mol.bonds[0] = bond;
      alertMolecule(mol);
    </script>

    <script type="text/javascript">
      var pyridineMolFile = 'Molecule Name\n  CHEMDOOD01011121543D 0   0.00000     0.00000     0\n[Insert Comment Here]\n  6  6  0  0  0  0  0  0  0  0  1 V2000\n    0.0000    1.0000    0.0000   N 0  0  0  0  0  0  0  0  0  0  0  0\n   -0.8660    0.5000    0.0000   C 0  0  0  0  0  0  0  0  0  0  0  0\n   -0.8660   -0.5000    0.0000   C 0  0  0  0  0  0  0  0  0  0  0  0\n    0.0000   -1.0000    0.0000   C 0  0  0  0  0  0  0  0  0  0  0  0\n    0.8660   -0.5000    0.0000   C 0  0  0  0  0  0  0  0  0  0  0  0\n    0.8660    0.5000    0.0000   C 0  0  0  0  0  0  0  0  0  0  0  0\n  1  2  2  0  0  0  0\n  2  3  1  0  0  0  0\n  3  4  2  0  0  0  0\n  4  5  1  0  0  0  0\n  5  6  2  0  0  0  0\n  6  1  1  0  0  0  0\nM  END';
      var mol = ChemDoodle.readMOL(pyridineMolFile);
      alertMolecule(mol);
    </script>

    <script type="text/javascript">
      var myCanvas = new ChemDoodle.ViewerCanvas('id', 150, 150);
//the width of the bonds should be .6 pixels
      myCanvas.specs.bonds_width_2D = .6;
//the spacing between higher order bond lines should be 18% of the length of the bond
      myCanvas.specs.bonds_saturationWidth_2D = .18;
//the hashed wedge spacing should be 2.5 pixels
      myCanvas.specs.bonds_hashSpacing_2D = 2.5;
//the atom label font size should be 10
      myCanvas.specs.atoms_font_size_2D = 10;
//we define a cascade of acceptable font families
//if Helvetica is not found, Arial will be used
      myCanvas.specs.atoms_font_families_2D = ['Helvetica', 'Arial', 'sans-serif'];
//display carbons labels if they are terminal
      myCanvas.specs.atoms_displayTerminalCarbonLabels_2D = true;
//add some color by using JMol colors for elements
      myCanvas.specs.atoms_useJMOLColors = true;
      myCanvas.emptyMessage = 'No Data Loaded!';
      var caffeineMolFile = 'Molecule Name\n  CHEMDOOD08070920033D 0   0.00000     0.00000     0\n[Insert Comment Here]\n 14 15  0  0  0  0  0  0  0  0  1 V2000\n   -0.3318    2.0000    0.0000   O 0  0  0  1  0  0  0  0  0  0  0  0\n   -0.3318    1.0000    0.0000   C 0  0  0  1  0  0  0  0  0  0  0  0\n   -1.1980    0.5000    0.0000   N 0  0  0  1  0  0  0  0  0  0  0  0\n    0.5342    0.5000    0.0000   C 0  0  0  1  0  0  0  0  0  0  0  0\n   -1.1980   -0.5000    0.0000   C 0  0  0  1  0  0  0  0  0  0  0  0\n   -2.0640    1.0000    0.0000   C 0  0  0  4  0  0  0  0  0  0  0  0\n    1.4804    0.8047    0.0000   N 0  0  0  1  0  0  0  0  0  0  0  0\n    0.5342   -0.5000    0.0000   C 0  0  0  1  0  0  0  0  0  0  0  0\n   -2.0640   -1.0000    0.0000   O 0  0  0  1  0  0  0  0  0  0  0  0\n   -0.3318   -1.0000    0.0000   N 0  0  0  1  0  0  0  0  0  0  0  0\n    2.0640   -0.0000    0.0000   C 0  0  0  2  0  0  0  0  0  0  0  0\n    1.7910    1.7553    0.0000   C 0  0  0  4  0  0  0  0  0  0  0  0\n    1.4804   -0.8047    0.0000   N 0  0  0  1  0  0  0  0  0  0  0  0\n   -0.3318   -2.0000    0.0000   C 0  0  0  4  0  0  0  0  0  0  0  0\n  1  2  2  0  0  0  0\n  3  2  1  0  0  0  0\n  4  2  1  0  0  0  0\n  3  5  1  0  0  0  0\n  3  6  1  0  0  0  0\n  7  4  1  0  0  0  0\n  4  8  2  0  0  0  0\n  9  5  2  0  0  0  0\n 10  5  1  0  0  0  0\n 10  8  1  0  0  0  0\n  7 11  1  0  0  0  0\n  7 12  1  0  0  0  0\n 13  8  1  0  0  0  0\n 13 11  2  0  0  0  0\n 10 14  1  0  0  0  0\nM  END';
      var caffeine = ChemDoodle.readMOL(caffeineMolFile);
//the bond lengths should be 14.4 pixels
      caffeine.scaleToAverageBondLength(14.4);
      myCanvas.loadMolecule(caffeine);
    </script>

    http://web.chemdoodle.com/tutorial/retrieving-data

    var mol = sketcher.getMolecule();
    var molFile = ChemDoodle.writeMOL(mol);

    var caffeine = ChemDoodle.readMOL(caffeineMolFile);

    alert(molFile);


    <script type="text/javascript">
      var myCanvas = new ChemDoodle.ViewerCanvas('id', 150, 150);
      myCanvas.emptyMessage = 'No Data Loaded!';
      var caffeineMolFile = 'Molecule Name\n  CHEMDOOD08070920033D 0   0.00000     0.00000     0\n[Insert Comment Here]\n 14 15  0  0  0  0  0  0  0  0  1 V2000\n   -0.3318    2.0000    0.0000   O 0  0  0  1  0  0  0  0  0  0  0  0\n   -0.3318    1.0000    0.0000   C 0  0  0  1  0  0  0  0  0  0  0  0\n   -1.1980    0.5000    0.0000   N 0  0  0  1  0  0  0  0  0  0  0  0\n    0.5342    0.5000    0.0000   C 0  0  0  1  0  0  0  0  0  0  0  0\n   -1.1980   -0.5000    0.0000   C 0  0  0  1  0  0  0  0  0  0  0  0\n   -2.0640    1.0000    0.0000   C 0  0  0  4  0  0  0  0  0  0  0  0\n    1.4804    0.8047    0.0000   N 0  0  0  1  0  0  0  0  0  0  0  0\n    0.5342   -0.5000    0.0000   C 0  0  0  1  0  0  0  0  0  0  0  0\n   -2.0640   -1.0000    0.0000   O 0  0  0  1  0  0  0  0  0  0  0  0\n   -0.3318   -1.0000    0.0000   N 0  0  0  1  0  0  0  0  0  0  0  0\n    2.0640   -0.0000    0.0000   C 0  0  0  2  0  0  0  0  0  0  0  0\n    1.7910    1.7553    0.0000   C 0  0  0  4  0  0  0  0  0  0  0  0\n    1.4804   -0.8047    0.0000   N 0  0  0  1  0  0  0  0  0  0  0  0\n   -0.3318   -2.0000    0.0000   C 0  0  0  4  0  0  0  0  0  0  0  0\n  1  2  2  0  0  0  0\n  3  2  1  0  0  0  0\n  4  2  1  0  0  0  0\n  3  5  1  0  0  0  0\n  3  6  1  0  0  0  0\n  7  4  1  0  0  0  0\n  4  8  2  0  0  0  0\n  9  5  2  0  0  0  0\n 10  5  1  0  0  0  0\n 10  8  1  0  0  0  0\n  7 11  1  0  0  0  0\n  7 12  1  0  0  0  0\n 13  8  1  0  0  0  0\n 13 11  2  0  0  0  0\n 10 14  1  0  0  0  0\nM  END';
      var caffeine = ChemDoodle.readMOL(caffeineMolFile);
      myCanvas.loadMolecule(caffeine);
    </script>

  </ui:remove>    


</ui:composition>