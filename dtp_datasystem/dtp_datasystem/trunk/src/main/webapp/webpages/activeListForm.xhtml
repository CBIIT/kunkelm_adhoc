<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"      
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                template="/webpages/templates/ui.xhtml">

  <ui:define name="content title">
    <h:outputText value="Active List Form View #{listManagerController.listManagerBean.activeList.listName} with #{fn:length(listManagerController.listManagerBean.activeList.cmpdListMembers)} ListMembers" />  
  </ui:define>

  <ui:define name="instructions">
    <h:outputText value="Soring and filtering of the list can be
                  done in the Table View.  Changes made there will 
                  be reflected in this view."/>
  </ui:define>        

  <ui:define name="export">    
  </ui:define>        

  <ui:define name="alternate">    
  </ui:define>        

  <ui:define name="content">

    <p:panel header="List Anchor Structure"
             rendered="#{sessionController.configurationBean.showAnchor and !empty listManagerController.listManagerBean.activeList.anchorSmiles}">

      <h:outputText value="anchorSmiles: ${listManagerController.listManagerBean.activeList.anchorSmiles}"/>

      <br/>

      <p:graphicImage alt="Chemical Structure of List Anchor"
                      width="#{sessionController.configurationBean.strcDim}" 
                      height="#{sessionController.configurationBean.strcDim}"
                      styleClass="anchorStructure"
                      url='#{sessionController.configurationBean.getSmilesStrcUrl(listManagerController.listManagerBean.activeList.anchorSmiles)}'>              
      </p:graphicImage>

    </p:panel>

    <p:dataGrid id="theDataGrid"
                var="listMember" 
                value="#{listManagerController.listManagerBean.filteredActiveListMembers}"                                     
                columns="1"  
                rows="1" 
                paginator="true"  
                currentPageReportTemplate="Page: {currentPage}/{totalPages} Records: {startRecord}-{endRecord} out of {totalRecords} filtered records"                
                paginatorTemplate="{CurrentPageReport}  {PreviousPageLink} {PageLinks} {NextPageLink}">  

      <f:facet name="header">  
        <p:row>  
          <p:column>List Contains: #{fn:length(listManagerController.listManagerBean.activeList.cmpdListMembers)} Cmpds</p:column>  
        </p:row>                                              
      </f:facet>

      <ui:include src="/webpages/shared_cmpdDetails.xhtml">            
        <ui:param name="the_cmpd" value="#{listMember.cmpd}"/>
      </ui:include>

    </p:dataGrid>

  </ui:define>

</ui:composition>
